{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst API_KEY = \"47281982-63a34c7367b72af3cb7b29a97\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImages(query, page, perPage = 15) {\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}\n","'use strict';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const galleryEl = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createMarkUp(images) {\n    const markUp = images\n        .map(\n            image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n    <ul class=\"img-dscr\">\n      <li><p><b>Likes</b> ${image.likes}</p></li>\n      <li><p><b>Views</b> ${image.views}</p></li>\n      <li><p><b>Comments</b> ${image.comments}</p></li>\n      <li><p><b>Downloads</b> ${image.downloads}</p></li>\n    </ul>\n  </a>\n</li>`\n        )\n        .join(\"\");\n\n    galleryEl.insertAdjacentHTML(\"beforeend\", markUp);\n    lightbox.refresh();\n}\n","'use strict';\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { galleryEl, createMarkUp } from \"./js/render-function\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst formEl = document.querySelector(\".form\");\nconst inputEl = document.querySelector(\"input\");\nconst loaderEl = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-btn\");\n\nlet currentPage = 1;\nlet queryTrimmed = \"\";\nconst PER_PAGE = 15;\nlet totalHits = 0;\n\nfunction toggleLoaderAndButton(showButton = false, showLoader = false) {\n    loadMoreBtn.hidden = !showButton;\n    loaderEl.hidden = !showLoader;\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n}\n\nfunction checkEndOfResults() {\n    const displayedHits = currentPage * PER_PAGE;\n    if (displayedHits >= totalHits) {\n        toggleLoaderAndButton(false, false);\n        iziToast.info({\n            title: \"End of Results\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"center\",\n            timeout: 3000,\n        });\n    }\n}\n\nformEl.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n\n    galleryEl.innerHTML = \"\";\n    toggleLoaderAndButton(false, true);\n\n    queryTrimmed = inputEl.value.trim();\n    currentPage = 1;\n\n    if (queryTrimmed === \"\") {\n        toggleLoaderAndButton(false, false);\n        return iziToast.warning({\n            title: \"Caution\",\n            message: \"Please complete the field!\",\n            position: \"center\",\n            timeout: 2000,\n        });\n    }\n\n    try {\n        const response = await getImages(queryTrimmed, currentPage, PER_PAGE);\n        totalHits = response.totalHits;\n\n        if (response.hits.length === 0) {\n            toggleLoaderAndButton(false, false);\n            return iziToast.info({\n                title: \"Sorry\",\n                message: \"There are no images matching your search query. Please try again!\",\n                position: \"center\",\n                timeout: 2000,\n            });\n        }\n\n        createMarkUp(response.hits);\n        toggleLoaderAndButton(true, false);\n        iziToast.success({\n            title: \"Success\",\n            message: `Found ${totalHits} images!`,\n            position: \"center\",\n            timeout: 2000,\n        });\n\n        checkEndOfResults();\n    } catch (error) {\n        toggleLoaderAndButton(false, false);\n        iziToast.error({\n            title: \"Error\",\n            message: \"There was an error fetching the images.\",\n            position: \"center\",\n            timeout: 2000,\n        });\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    toggleLoaderAndButton(false, true);\n    currentPage += 1;\n\n    try {\n        const response = await getImages(queryTrimmed, currentPage, PER_PAGE);\n\n        if (response.hits.length === 0) {\n            toggleLoaderAndButton(false, false);\n            return iziToast.info({\n                title: \"End of Results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"center\",\n                timeout: 3000,\n            });\n        }\n\n        createMarkUp(response.hits);\n        toggleLoaderAndButton(true, false);\n        smoothScroll();\n        checkEndOfResults();\n    } catch (error) {\n        toggleLoaderAndButton(false, false);\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to load more images.\",\n            position: \"center\",\n            timeout: 2000,\n        });\n    }\n});\n"],"names":["API_KEY","BASE_URL","getImages","query","page","perPage","params","axios","error","galleryEl","lightbox","SimpleLightbox","createMarkUp","images","markUp","image","formEl","inputEl","loaderEl","loadMoreBtn","currentPage","queryTrimmed","PER_PAGE","totalHits","toggleLoaderAndButton","showButton","showLoader","smoothScroll","cardHeight","checkEndOfResults","iziToast","event","response"],"mappings":"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"}